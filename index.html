<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
  <title>Cycle Workout WebApp v1009</title>

  <!-- ✅ 외부 CSS 연결 -->
  <link rel="stylesheet" href="assets/css/style.css" />
</head>

<body>
  <!-- ========================== -->
  <!--       CONNECTION SCREEN    -->
  <!-- ========================== -->
  <div id="connectionScreen" class="screen active">
    <div class="header">기기 연결</div>
    <div class="device-card" id="trainerCard">
      <span>스마트로라 (FTMS)</span>
      <button onclick="connectTrainer()">연결</button>
    </div>
    <div class="device-card" id="powerMeterCard">
      <span>파워미터</span>
      <button onclick="connectPowerMeter()">연결</button>
    </div>
    <div class="device-card" id="heartRateCard">
      <span>심박계</span>
      <button onclick="connectHeartRate()">연결</button>
    </div>

    <div style="text-align:center; margin-top:20px;">
      <button onclick="goToScreen('profileScreen')">다음 단계</button>
    </div>
  </div>

  <!-- ========================== -->
  <!--        PROFILE SCREEN      -->
  <!-- ========================== -->
  <div id="profileScreen" class="screen">
    <div class="header">프로필 선택</div>
    <div class="card profile-card" onclick="selectProfile('사용자1')">사용자1</div>
    <div class="card profile-card" onclick="selectProfile('사용자2')">사용자2</div>
    <div style="text-align:center;">
      <button onclick="goToScreen('workoutScreen')">워크아웃 선택</button>
    </div>
  </div>

  <!-- ========================== -->
  <!--        WORKOUT SCREEN      -->
  <!-- ========================== -->
  <div id="workoutScreen" class="screen">
    <div class="header">워크아웃 프로그램</div>
    <div class="card workout-card" onclick="selectWorkout('기본 인터벌')">기본 인터벌</div>
    <div class="card workout-card" onclick="selectWorkout('FTP 테스트')">FTP 테스트</div>
    <div style="text-align:center;">
      <button onclick="startWorkout()">훈련 시작</button>
    </div>
  </div>

  <!-- ========================== -->
  <!--        TRAINING SCREEN     -->
  <!-- ========================== -->
  <div id="trainingScreen" class="screen">
    <div class="header">훈련 진행 중</div>

    <div class="training-metrics">
      <div class="metric-card">
        <div class="metric-value" id="currentPowerValue">0</div>
        <div class="metric-label">파워 (W)</div>
      </div>
      <div class="metric-card">
        <div class="metric-value" id="cadenceValue">0</div>
        <div class="metric-label">케이던스</div>
      </div>
      <div class="metric-card">
        <div class="metric-value" id="heartRateValue">0</div>
        <div class="metric-label">심박수</div>
      </div>
      <div class="metric-card">
        <div class="metric-value" id="targetPowerValue">150</div>
        <div class="metric-label">목표 파워</div>
      </div>
    </div>

    <div class="power-display">
      <div class="progress-fill" id="powerProgressBar"></div>
    </div>

    <div class="timeline" id="timelineContainer">
      <!-- 세그먼트 표시 -->
    </div>

    <div style="text-align:center;">
      <button onclick="pauseTraining()">일시정지</button>
      <button onclick="stopTraining()">종료</button>
    </div>
  </div>

  <!-- ========================== -->
  <!--         RESULT SCREEN      -->
  <!-- ========================== -->
  <div id="resultScreen" class="screen">
    <div class="header">훈련 결과</div>
    <div class="card">
      <div>총 훈련 시간: <span id="totalTime">00:00</span></div>
      <div>평균 파워: <span id="avgPower">0</span> W</div>
      <div>평균 심박수: <span id="avgHR">0</span> bpm</div>
      <div>달성률: <span id="achievement">0</span> %</div>
    </div>

    <div style="text-align:center;">
      <button onclick="goToScreen('connectionScreen')">다시 시작</button>
    </div>
  </div>

  <!-- ========================== -->
  <!--        COUNTDOWN POPUP     -->
  <!-- ========================== -->
  <div id="countdownOverlay" class="hidden">
    <div id="countdownNumber">3</div>
    <div>준비하세요!</div>
  </div>

  <!-- ========================== -->
  <!--       JS 연결 (기능)      -->
  <!-- ========================== -->
  <script src="js/bluetooth.js"></script>
  <script src="js/app.js"></script>
</body>
</html>
